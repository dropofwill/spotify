language: scala

scala:
   - 2.12.6
   - 2.11.12

cache:
  directories:
  - "$HOME/.ivy2/cache"
  - "$HOME/.sbt/boot"

before_script:
  - nvm install 10 # nodejs < 10 fails finding URL class
  - version=$(curl -s https://chromedriver.storage.googleapis.com/LATEST_RELEASE) &&
    wget "https://chromedriver.storage.googleapis.com/$version/chromedriver_linux64.zip"
  - mkdir -p chromedriver && unzip chromedriver_linux64.zip -d chromedriver/
  - export PATH="$PATH:$PWD/chromedriver/"

script:
  - sbt ++$TRAVIS_SCALA_VERSION coreJVM/test && xvfb-run sbt ++$TRAVIS_SCALA_VERSION coreJS/test

after_success: "sbt coreJVM/coverageReport coreJVM/coveralls"